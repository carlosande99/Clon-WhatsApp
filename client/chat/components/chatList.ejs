<script type="module">
    document.addEventListener('DOMContentLoaded', () => {
        fetch('/chats', {
            method: 'GET',
        })
        .then(res => {
            if (!res.ok) {
                throw new Error('Error en la red');
            }
            return res.json();
        })
        .then(data => {
            const chats = document.getElementById('chats');
            data.forEach(element => {
                const div = document.createElement('div');
                div.classList.add(
                'text-start', 'p-4', 'w-9/10', 'text-white', 'hover:bg-whatsappGrayDark/70', 'rounded-md', 'mb-1'
                );
                const amigo = document.createElement('button');
                amigo.classList.add(
                'btn' , 'text-start', 'w-full'
                );
                amigo.id = element.nombre;
                amigo.innerText = element.nombre;
                div.appendChild(amigo);
                chats.appendChild(div);
            });
        })
        .catch(error => {
            console.error('Hubo un problema con la solicitud Fetch:', error);
        });
    }) 
</script>