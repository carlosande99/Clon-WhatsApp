<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WhatsApp Web Clone</title>
    <script type="module">
        import {io} from 'https://cdn.socket.io/4.8.1/socket.io.esm.min.js'
        const socket = io()

        const form = document.getElementById('form')
        const input = document.getElementById('input')
        const messages = document.querySelector('.chat-messages')

        socket.on('chat message', msg => {
            const message = document.createElement('div')
            message.textContent = msg
            messages.appendChild(message)
        })
        form.addEventListener('submit', e => {
            e.preventDefault()
            if (input.value) {
                socket.emit('chat message', input.value)
                input.value = ''
            }
        })
    </script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: #f0f2f5;
        }

        .chat-container {
            max-width: 1000px;
            margin: 20px auto;
            background-color: #fff;
            box-shadow: 0 1px 3px rgba(0,0,0,0.12);
            height: 90vh;
            display: flex;
        }

        .chat-sidebar {
            width: 30%;
            background-color: #fff;
            border-right: 1px solid #e9edef;
        }

        .chat-main {
            width: 70%;
            display: flex;
            flex-direction: column;
        }

        .chat-header {
            padding: 16px;
            background-color: #f0f2f5;
            border-bottom: 1px solid #e9edef;
        }

        .chat-messages {
            flex: 1;
            padding: 20px;
            background-color: #efeae2;
            overflow-y: auto;
        }

        .chat-input {
            padding: 10px;
            background-color: #f0f2f5;
            align-items: center;
        }

        .message-input {
            flex: 1;
            padding: 9px 12px;
            border: none;
            border-radius: 8px;
            margin: 0 10px;
            width: 75%;
        }

        .message {
            max-width: 65%;
            padding: 8px 12px;
            margin: 8px;
            border-radius: 7.5px;
            position: relative;
        }

        .message.received {
            background-color: #fff;
            align-self: flex-start;
        }

        .message.sent {
            background-color: #d9fdd3;
            align-self: flex-end;
        }
        #enviar{
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 9px 12px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="chat-container">
        <div class="chat-sidebar">
            <!-- Aquí irán los contactos/conversaciones -->
        </div>
        <div class="chat-main">
            <div class="chat-header">
                <h3>Chat</h3>
            </div>
            <div class="chat-messages">
                <!-- Los mensajes se agregarán aquí dinámicamente -->
            </div>
            <div class="chat-input">
                <form id="form">
                    <input type="text" class="message-input" placeholder="Escribe un mensaje aquí" id="input">
                    <button type="submit" id="enviar">Enviar</button>
                </form>
            </div>
        </div>
    </div>
</body>
</html>